<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Search</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="full-screen" content="yes" />
    <meta name="browsermode" content="application" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="x5-page-mode" content="app" />
    <link rel="stylesheet" href="https://unpkg.com/bootstrap@4/dist/css/bootstrap.min.css" crossorigin="anonymous" />
    <link rel="stylesheet" href="./assets/css/search.css" />
    <script src="https://unpkg.com/jquery/dist/jquery.min.js"></script>
    <script src="https://unpkg.com/sortable-dnd/dist/sortable-dnd.min.js"></script>
    <script src="./assets/js/search.js"></script>
  </head>

  <body>
    <header class="flex justify-content-between">
      <div class="flex">
        <a href="https://github.com/mfuu/search" target="_blank" title="github" class="github">
          <svg height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
            <path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path>
          </svg>
        </a>
      </div>
      <div class="flex align-items-center">
        <div class="flex">
          <span class="setup-icon" data-toggle="dropdown" aria-expanded="false">
            <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path d="M13.85 22.25h-3.7c-.74 0-1.36-.54-1.45-1.27l-.27-1.89c-.27-.14-.53-.29-.79-.46l-1.8.72c-.7.26-1.47-.03-1.81-.65L2.2 15.53c-.35-.66-.2-1.44.36-1.88l1.53-1.19c-.01-.15-.02-.3-.02-.46 0-.15.01-.31.02-.46l-1.52-1.19c-.59-.45-.74-1.26-.37-1.88l1.85-3.19c.34-.62 1.11-.9 1.79-.63l1.81.73c.26-.17.52-.32.78-.46l.27-1.91c.09-.7.71-1.25 1.44-1.25h3.7c.74 0 1.36.54 1.45 1.27l.27 1.89c.27.14.53.29.79.46l1.8-.72c.71-.26 1.48.03 1.82.65l1.84 3.18c.36.66.2 1.44-.36 1.88l-1.52 1.19c.01.15.02.3.02.46s-.01.31-.02.46l1.52 1.19c.56.45.72 1.23.37 1.86l-1.86 3.22c-.34.62-1.11.9-1.8.63l-1.8-.72c-.26.17-.52.32-.78.46l-.27 1.91c-.1.68-.72 1.22-1.46 1.22zm-3.23-2h2.76l.37-2.55.53-.22c.44-.18.88-.44 1.34-.78l.45-.34 2.38.96 1.38-2.4-2.03-1.58.07-.56c.03-.26.06-.51.06-.78s-.03-.53-.06-.78l-.07-.56 2.03-1.58-1.39-2.4-2.39.96-.45-.35c-.42-.32-.87-.58-1.33-.77l-.52-.22-.37-2.55h-2.76l-.37 2.55-.53.21c-.44.19-.88.44-1.34.79l-.45.33-2.38-.95-1.39 2.39 2.03 1.58-.07.56a7 7 0 0 0-.06.79c0 .26.02.53.06.78l.07.56-2.03 1.58 1.38 2.4 2.39-.96.45.35c.43.33.86.58 1.33.77l.53.22.38 2.55z"></path>
              <circle cx="12" cy="12" r="3.5"></circle>
            </svg>
          </span>
          <div id="setupDropdown" class="dropdown-menu dropdown-menu-right">
            <a href="#" class="dropdown-item" data-key="editTag">编辑标签</a>
          </div>
        </div>
        <span class="drawer-icon">
          <svg class="gb_h" focusable="false" viewBox="0 0 24 24" width="24" height="24">
            <path d="M6,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM6,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM6,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM16,6c0,1.1 0.9,2 2,2s2,-0.9 2,-2 -0.9,-2 -2,-2 -2,0.9 -2,2zM12,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM18,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM18,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2z"></path>
          </svg>
        </span>
      </div>
    </header>
    <div class="container">
      <section class="integrated-search">
        <div class="logo"></div>
        <div class="search-box flex align-items-center justify-content-end pl-3 pr-3">
          <div id="searchEngine" class="dropdown">
            <i id="currentEngine" data-toggle="dropdown" aria-expanded="false"></i>
            <div id="availableEngine" class="dropdown-menu"></div>
          </div>
          <input id="searchInput" type="text" autocomplete="off" />
          <i id="searchIcon" class="search-icon"></i>
          <ul id="searchSuggest" class="search-suggestions"></ul>
        </div>
      </section>
      <section class="custom-tags flex align-items-center flex-wrap mt-4">
        <span id="addCustomTag" class="add-custom" data-toggle="modal" data-target="#customModal">+</span>
      </section>
    </div>
    <footer>
      <div class="flow"></div>
      <p class="copyright mt-3 mb-2 text-muted text-center"> ©2023 by <a href="https://github.com/mfuu/">mfuu</a>. All rights reserved.</p>
    </footer>
    <!-- customModal -->
    <div class="modal fade" id="customModal" tabindex="-1" aria-labelledby="customModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <b class="modal-title" id="customModalLabel">自定义书签</b>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group row">
                <label for="webSiteTitle" class="col-sm-2 col-form-label">名称</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="webSiteTitle" placeholder="输入网站名称">
                </div>
              </div>
              <div class="form-group row">
                <label for="webSiteUrl" class="col-sm-2 col-form-label">网址</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="webSiteUrl" placeholder="输入网站地址">
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary btn-sm" onclick="handleAddCustomTag(this)">保存</button>
          </div>
        </div>
      </div>
    </div>
    <script>
      $(function () {
        const input = $(`.integrated-search`).find("#searchInput");
        input.bind('input porpertychange', onInputChange);
        $.getJSON("config.json", function (data) {
          window.searchConfig = data;
          const engine = getEngineDom();
          const availableEngine = $(".integrated-search").find("#availableEngine");
          $.each(data, (i, o) => {
            availableEngine.append(
              `<a class="dropdown-item ${o.key}" href="#" data-key="${o.key}" data-search="${o.search}" data-placeholder="${o.placeholder}">${o.title}</a>`
            );
          });
          $.each(data, (i, o) => {
            if (o.default) {
              const item = engine.find(`.${o.key}`);
              handleEngineDropdownClick({ target: item[0] });
            }
          });
        });
        visibleCustomTags();
      });
    </script>
    <script src="https://unpkg.com/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
