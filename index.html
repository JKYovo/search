<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Search</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="full-screen" content="yes" />
    <meta name="browsermode" content="application" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="x5-page-mode" content="app" />
    <link rel="stylesheet" href="https://unpkg.com/bootstrap@4/dist/css/bootstrap.min.css" crossorigin="anonymous" />
    <link rel="stylesheet" href="./assets/css/search.css" />
    <script src="https://unpkg.com/jquery/dist/jquery.min.js"></script>
    <script src="./assets/js/search.js"></script>
  </head>

  <body>
    <header>
      <div id="he-plugin-simple"></div>
      <div class="drawer-icon">≡</div>
      <script>
        WIDGET = {
          CONFIG: {
            "modules": "01234",
            "background": 5,
            "tmpColor": "4A4A4A",
            "tmpSize": 14,
            "cityColor": "4A4A4A",
            "citySize": 14,
            "aqiSize": 14,
            "weatherIconSize": 22,
            "alertIconSize": 16,
            "padding": "8px 8px 8px 8px",
            "shadow": "1",
            "language": "auto",
            "borderRadius": 5,
            "fixed": "false",
            "vertical": "middle",
            "horizontal": "center",
            "key": "acd0fdcab4b9481a98d0f59145420fac"
          }
        }
      </script>
      <script src="https://widget.heweather.net/simple/static/js/he-simple-common.js?v=1.1"></script>
    </header>
    <div class="container">
      <section class="integrating-search">
        <div class="search-box">
          <div id="searchEngine" class="dropdown">
            <i id="currentEngine" data-toggle="dropdown" aria-expanded="false"></i>
            <div id="dropdownEngine" class="dropdown-menu"></div>
          </div>
          <input id="searchInput" type="text" style="outline: 0" autocomplete="off" />
          <i id="searchIcon" class="search-icon"></i>
          <ul id="searchSuggest" class="search-suggestions"></ul>
        </div>
        <script>
          $(function () {
            const input = $(`.integrating-search`).find("#searchInput");
            input.keyup(onInputChange);
            $.getJSON("config.json", function (data) {
              window.searchConfig = data;
              const engine = getEngineDom();
              const dropdown = engine.find("#dropdownEngine");
              const current = engine.find("#currentEngine");
              $.each(data, (i, o) => {
                dropdown.append(
                  `<a class="dropdown-item ${o.key}" href="#" data-key="${o.key}" data-search="${o.search}" data-placeholder="${o.placeholder}">${o.title}</a>`
                );
              });
              $.each(data, (i, o) => {
                if (o.default) {
                  const item = engine.find(`.${o.key}`);
                  handleDropdownClick({ target: item[0] });
                }
              });
            });
          });
        </script>
      </section>
    </div>
    <footer>
      <p class="mt-5 mb-3 text-muted text-center"> ©2023 by <a href="https://github.com/mfuu/">mfuu</a>. All rights reserved.</p>
    </footer>
    <script src="https://unpkg.com/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
